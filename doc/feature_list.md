# 対戦型タワーディフェンス プログラムイベント 機能一覧案

## 1. ゲーム基本仕様
- 自軍・敵軍とも各10ユニットで構成し、10種類のJOBから自由編成。
- マップは左右に陣地を持ち中央に狭い通路と耐久値を持つ壁を配置。
- 勝利条件は敵城（耐久値を持つオブジェクト）を破壊すること。
- 試合はローカルPC上で完結し、通信要素やサーバー構築は不要。
- ターン制または時間ステップ制のシミュレーションで進行。

## 2. プレイヤープログラム仕様
- ユニット1体につき1ファイル（JavaScript）を用意し、所定のAPIに沿って行動ロジックを記述。
- 各ユニットファイルは `init()`（初期化）、`update(state)`（毎ステップの行動決定）などの関数をエクスポート。
- 共通で利用可能な定数・ユーティリティを提供するSDKモジュールを用意。
- 行動可能コマンド：移動、攻撃、スキル使用、防御、待機など。
- 行動決定で参照可能な情報：視界範囲内の敵味方、壁・城の状態、自ユニットのHP/MPなど。
- 不正行為防止のため、想定外のモジュール読み込みやI/Oを制限するサンドボックス実行環境を実装。

## 3. JOBシステム
- 10種類のJOBテンプレートを提供（例：ソルジャー、ランサー、アーチャー、メイジ、ヒーラー、ガーディアン、アサシン、エンジニア、サモナー、スカウト）。
- 各JOBは基礎ステータス（HP、攻撃力、移動速度、防御力、射程、スキル）を持つ。
- スキルにはクールダウンやコストを設定し、`update` 内で使用可能。
- ユニット作成時にJOBを指定し、プログラムファイル名と紐付け。
- バランス調整用にJOB定義を外部JSONで管理。

## 4. マップ・オブジェクト仕様
- マップサイズ、通路幅、壁耐久値などを設定ファイルで定義。
- 壁破壊によって通路幅が変化する演出。
- 城は耐久値の他にシールドなど特殊要素を設定可能。
- 地形効果（移動速度低下ゾーン、攻撃強化エリア等）の導入を検討。

## 5. シミュレーションエンジン
- 各ステップでユニット行動を評価し、同時行動解決ルールを定義（優先度や行動キュー）。
- 当たり判定、射程判定、スキル効果適用の処理を実装。
- ランダム要素は乱数シード固定でリプレイ可能にする。
- ログ生成（テキスト・JSON）とリプレイ再生機能を提供。

## 6. ユーザーインターフェース
- 試合進行の可視化（CanvasまたはDOMベース）を提供。
- 再生速度変更、一時停止、ステップ進行などの操作。
- ユニット情報ポップアップ、HPバー、ログ閲覧UI。

## 7. 開発サポート
- 雛形ユニットコードとチュートリアル資料。
- ローカルテスト用CLI：指定した2チームのAIを読み込み対戦。
- デバッグモード：視界表示、攻撃判定表示、内部状態ダンプ。
- 自動テストスクリプト：ユニットファイルの構文チェック、API準拠チェック。

## 8. 大会運営機能（オプション）
- トーナメント自動進行スクリプト。
- 試合結果集計とランキング生成。
- ベンチマーク用AI（標準AI）との対戦機能。

## 9. ドキュメント
- ルールブック、APIリファレンス、JOB仕様書。
- サンプル戦略とAIの実装例。
- トラブルシューティングガイドとFAQ。