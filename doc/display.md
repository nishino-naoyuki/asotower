# 画面レイアウト仕様（2025年10月最新版）

## 1. 全体構成
- 上から順に「操作バー」「バトルキャンバス」「サイドパネル（ユニット情報／ログ）」を縦に配置。
- ミニマップやホバー説明などの追加UIは未実装。

## 2. メインバトルビュー
- `map.width=30` × `map.height=15` マスを描画し、上部にオーバーレイ(情報バー)を重ねる。
- 城は左右端の指定座標（west: {x:1,y:7}, east: {x:28,y:7}) に固定配置。
- ユニットの初期配置は「自軍城基準」が原則（unitXX.jsのinitialPositionでforward/lateral/x/y指定）。
- x/yのみ指定の場合はマップ絶対座標、forward/lateral指定時は自軍城基準。
- 攻撃時には軌跡・ヒットエフェクト・命中リング、スキル時には専用エフェクトを描画。
- 視点は固定。スクロール・ズームなし。

## 3. タイムライン／操作バー（上部）
- 表示内容：ターン数、存命ユニット数（東西）、経過時間/残り時間のラベル。
- 戦闘開始ボタン。
- 巻き戻しや任意ターンジャンプなどの高度なタイムライン操作は未実装。

## 4. ユニット情報パネル（右側）
- 選択ユニット（クリック）1体のステータスを表示。複数選択やドラッグ選択は未実装。
- 項目：JOBアイコン、HP・最大HP、攻撃、防御、速度（速度÷10換算値）、射程（÷10換算値）、視界、スキル情報、現在の座標、ボーナス値（加算後ステータス）など。
- JOB名・表示名はinit関数のname/jobで決定。座標はマップ上の現在位置を表示。
- ボーナス値はJOB基本値に加算後の値を表示。
- 複数選択やドラッグ選択は未実装。

## 5. イベントログ（下部）
- 戦闘イベントをターン毎に時系列表示。最新が上部に追加され、自動スクロール。
- 表示対象：攻撃結果、スキル使用、移動失敗、城/壁ダメージ、エラー、バリデータ警告（ボーナス超過・配置重複など）も表示。
- 表示対象：攻撃結果、スキル使用、移動失敗、城/壁ダメージ、エラーなど。
- フィルタリング機能は未実装（今後の改善候補）。

## 6. 表示設定パネル（右下）
- 現状、個別の表示設定トグルは未提供。UI改善項目として追記。

## 7. 操作方法
- 左クリックでユニット選択／解除。ドラッグ選択や右クリック操作は未実装。
- ユニット選択時はサイドパネルに詳細情報が表示される。
- コピペ例やサンプルコードはそのまま動かない場合がある旨を注意書きで表示。
- キーボードショートカットは未割り当て。マウスのみで操作可能。